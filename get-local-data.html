<!DOCTYPE html>
<html>
<head>
    <title>è·å–æœ¬åœ°æ•°æ®</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        .data-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .data-output { background: #f5f5f5; padding: 10px; border-radius: 3px; font-family: monospace; white-space: pre-wrap; max-height: 300px; overflow-y: auto; }
        button { padding: 10px 20px; margin: 5px; background: #007cba; color: white; border: none; border-radius: 3px; cursor: pointer; }
        button:hover { background: #005a87; }
        .copy-btn { background: #28a745; }
        .copy-btn:hover { background: #1e7e34; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” è·å–æœ¬åœ°localStorageæ•°æ®</h1>
        <p>è¿™ä¸ªé¡µé¢ä¼šå¸®ä½ è·å–æœ¬åœ°å­˜å‚¨çš„æ¨ªå¹…å’Œäº§å“æ•°æ®ï¼Œç„¶ååŒæ­¥åˆ°æ•°æ®åº“ã€‚</p>
        
        <div class="data-section">
            <h3>ğŸ“‹ æ¨ªå¹…æ•°æ® (Banners)</h3>
            <button onclick="getBanners()">è·å–æ¨ªå¹…æ•°æ®</button>
            <button class="copy-btn" onclick="copyToClipboard('banners-output')">å¤åˆ¶æ•°æ®</button>
            <div id="banners-output" class="data-output">ç‚¹å‡»"è·å–æ¨ªå¹…æ•°æ®"æŒ‰é’®...</div>
        </div>
        
        <div class="data-section">
            <h3>ğŸ“¦ äº§å“æ•°æ® (Products)</h3>
            <button onclick="getProducts()">è·å–äº§å“æ•°æ®</button>
            <button class="copy-btn" onclick="copyToClipboard('products-output')">å¤åˆ¶æ•°æ®</button>
            <div id="products-output" class="data-output">ç‚¹å‡»"è·å–äº§å“æ•°æ®"æŒ‰é’®...</div>
        </div>
        
        <div class="data-section">
            <h3>ğŸš€ åŒæ­¥åˆ°æ•°æ®åº“</h3>
            <p>è·å–æ•°æ®åï¼Œç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®å°†æ•°æ®åŒæ­¥åˆ°Supabaseæ•°æ®åº“ï¼š</p>
            <button onclick="syncToDatabase()" style="background: #dc3545;">åŒæ­¥åˆ°æ•°æ®åº“</button>
            <div id="sync-output" class="data-output">ç­‰å¾…åŒæ­¥...</div>
        </div>
    </div>

    <script>
        function getBanners() {
            try {
                const banners = JSON.parse(localStorage.getItem('tinytech_banners') || '[]');
                document.getElementById('banners-output').textContent = JSON.stringify(banners, null, 2);
                console.log('Banners:', banners);
            } catch (error) {
                document.getElementById('banners-output').textContent = 'é”™è¯¯: ' + error.message;
            }
        }
        
        function getProducts() {
            try {
                const products = JSON.parse(localStorage.getItem('tinytech_products') || '[]');
                document.getElementById('products-output').textContent = JSON.stringify(products, null, 2);
                console.log('Products:', products);
            } catch (error) {
                document.getElementById('products-output').textContent = 'é”™è¯¯: ' + error.message;
            }
        }
        
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            const text = element.textContent;
            navigator.clipboard.writeText(text).then(() => {
                alert('æ•°æ®å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            }).catch(err => {
                console.error('å¤åˆ¶å¤±è´¥:', err);
                // å¤‡ç”¨æ–¹æ³•
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('æ•°æ®å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            });
        }
        
        async function syncToDatabase() {
            const syncOutput = document.getElementById('sync-output');
            syncOutput.textContent = 'æ­£åœ¨åŒæ­¥æ•°æ®åˆ°æ•°æ®åº“...';
            
            try {
                // è·å–æœ¬åœ°æ•°æ®
                const banners = JSON.parse(localStorage.getItem('tinytech_banners') || '[]');
                const products = JSON.parse(localStorage.getItem('tinytech_products') || '[]');
                
                if (banners.length === 0 && products.length === 0) {
                    syncOutput.textContent = 'é”™è¯¯: æ²¡æœ‰æ‰¾åˆ°æœ¬åœ°æ•°æ®ã€‚è¯·å…ˆè·å–æ¨ªå¹…å’Œäº§å“æ•°æ®ã€‚';
                    return;
                }
                
                // è¿™é‡Œéœ€è¦è°ƒç”¨åç«¯APIæ¥åŒæ­¥æ•°æ®
                // ç”±äºæµè§ˆå™¨å®‰å…¨é™åˆ¶ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥è¿æ¥Supabase
                syncOutput.textContent = `æ‰¾åˆ°æ•°æ®:\n- æ¨ªå¹…: ${banners.length} æ¡\n- äº§å“: ${products.length} æ¡\n\nè¯·å°†è¿™äº›æ•°æ®å¤åˆ¶å¹¶ä½¿ç”¨Node.jsè„šæœ¬åŒæ­¥åˆ°æ•°æ®åº“ã€‚`;
                
            } catch (error) {
                syncOutput.textContent = 'åŒæ­¥å¤±è´¥: ' + error.message;
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨è·å–æ•°æ®
        window.onload = function() {
            getBanners();
            getProducts();
        };
    </script>
</body>
</html>